{% extends "base.html" %}
{% block title %}{% if is_edit %}Modifier{% else %}Nouveau{% endif %} compteur{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>{% if is_edit %}Modifier{% else %}Nouveau{% endif %} compteur</h2>
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb mb-0">
      <li class="breadcrumb-item"><a href="{{ url_for('machines') }}">Machines</a></li>
      <li class="breadcrumb-item"><a href="{{ url_for('machine_detail', machine_id=machine.id) }}">{{ machine.name }}</a></li>
      <li class="breadcrumb-item"><a href="{{ url_for('machine_counters', machine_id=machine.id) }}">Compteurs</a></li>
      <li class="breadcrumb-item active">{% if is_edit %}Modifier{% else %}Nouveau{% endif %}</li>
    </ol>
  </nav>
</div>

<form method="post" class="mt-4">
  <div class="mb-3">
    <label class="form-label">Nom du compteur <span class="text-danger">*</span></label>
    <input class="form-control" type="text" name="name" value="{% if is_edit and counter %}{{ counter.name }}{% endif %}" required placeholder="Ex: Heures moteur, Cycles, etc." />
    <small class="form-text text-muted">Nom unique pour identifier ce compteur</small>
  </div>
  
  {% if not is_edit %}
  <div class="mb-3">
    <label class="form-label">Valeur initiale</label>
    <input class="form-control" type="number" step="0.1" name="initial_value" value="0" />
    <small class="form-text text-muted">Valeur de départ du compteur</small>
  </div>
  {% endif %}
  
  <div class="mb-3">
    <label class="form-label">Unité</label>
    <input class="form-control" type="text" name="unit" placeholder="h, cycles, anneaux, etc." value="{% if is_edit and counter and counter.unit %}{{ counter.unit }}{% else %}h{% endif %}" maxlength="20" />
    <small class="form-text text-muted">Unité de mesure du compteur</small>
  </div>
  
  <button class="btn btn-success">{% if is_edit %}Modifier{% else %}Créer{% endif %}</button>
  <a href="{{ url_for('machine_counters', machine_id=machine.id) }}" class="btn btn-secondary">Annuler</a>
</form>
{% endblock %}

